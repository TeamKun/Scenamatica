import Action, {ScenarioType} from "/src/components/Action";
import BelowDocument from "/src/components/BelowDocument";
import {ObjectType} from "/src/components/Object";

# プレイヤに関連するアクション

プレイヤに関連するアクションを列挙しています。

---

## 記述する際の注意 {#notes}

:::tip

**シナリオやシナリオファイルの概念が初めての方は、先に[こちら](/docs/use/scenario)を参照して理解しておくことを推奨します。**

:::

<BelowDocument docId="use/scenario/scenario-file"
               label="シナリオファイルを記述する際の注意"
               anchor="notes"
/>


## 全般 - 引数 `target` {#general-target}

対象のエンティティを[PlayerSpecifier 型（プレイヤ指定子）](/docs/use/scenario/types/entities#player-specifier)で指定します。

:::info シナリオの種類での振る舞いの違い

+ アクション実行シナリオでは、単一のプレイヤを指します。  
`@e` 等で複数のプレイヤを指定した場合は、最初に見つかったプレイヤが使用されます。
+ アクション実行期待シナリオでは、該当する**複数のプレイヤのどれか**を指します。  
複数のプレイヤを指定した（が見つかった）場合は、そのうちのどれか一体が条件を満たしていたらパスされます。  
単一のプレイヤを指定した場合はそのプレイヤが条件を満たしているかどうかが判定されます。

例：
``` yaml

- type: execute
  action: entity_...
  with:
    targe: "@a[team=Red]"  # チームが Red のプレイヤのうち、最初に見つかったものが使用される

---

- type: expect
  action: entity_...
  with:
    target: "@a[team=Red]"  # チームが Red のプレイヤのうち、どれか一体が条件を満たしていればパスされる

```

:::

## 全般 - 出力 `target` {#general-output-target}

対象となったプレイヤの [`Player`](/docs/use/scenario/types/entities/#player) オブジェクトを出力します。

## 特別：プレイヤ {#player}

<Action name="プレイヤ"
        description="プレイヤの状態や振る舞い、属性を変更します。"
        id="player"
        args={[
          {
            name: "target",
            type: "PlayerSpecifier",
            anchor: "general-target",
            type_link: "/docs/use/scenario/types/entities#player-specifier",
            description: "状態を書き換える対象のプレイヤです。",
            required: true
          },
          {
            name: "data",
            type: "Player",
            type_link: "/docs/use/scenario/types#player",
            description: "書き換えるプレイヤの状態です。",
            required: [ScenarioType.EXECUTE]
          },
        ]}
        outputs={[
          {
            name: "target",
            type: "Player",
            type_link: "/docs/use/scenario/types#player",
            description: "書き換えたプレイヤです。",
          }
        ]}
        executable={"プレイヤの状態・属性を変更します。"}
        requireable={"プレイヤが存在するか、または状態・属性が指定されたものと一致するかを判定します。"}
/>


## バケツの使用 {#bucket-empty}

<Action name="バケツの使用"
        description="バケツの使用に関するアクションです。"
        id="player_bucket_empty"
        events={
          {
            name: "PlayerBucketEmptyEvent",
            package: "org.bukkit.event.player",
          }
        }
        args={[
          {
            name: "target",
            description: "バケツを使用するプレイヤです。",
            type: "PlayerSpecifier",
            type_anchor: "#general-target",
            required: [ScenarioType.EXECUTE]
          },
          {
            name: "bucket",
            description: "使用するバケツです。",
            type: "Enum{...Material}"
          },
          {
            name: "block",
            description: "バケツを使用するブロックです。",
            type: "Block",
            type_link: "/docs/use/scenario/types/misc#block",
          },
          {
            name: "clickedBlock",
            description: "バケツを使用するブロックです。",
            type: "Block",
            type_link: "/docs/use/scenario/types/misc#block",
          },
          {
            name: "blockFace",
            description: "ブロックの面です。",
            type: "BlockFace{UP, DOWN, NORTH, EAST, SOUTH, WEST}"
          },
          {
            name: "hand",
            description: "使用する手です。",
            type: "列挙型{HAND, OFF_HAND}",
            default: "HAND",
            available: [ScenarioType.WATCH]
          },
          {
            name: "eventOnly",
            anchor: "bucket-empty-event-only",
            description: "イベントのみ発火させるかどうかです。",
            type: ObjectType.BOOLEAN,
            default: "false",
            available: [ScenarioType.EXECUTE]
          }
        ]}
        outputs={[
          {
            name: "target",
            description: "バケツを使用したプレイヤです。",
            type: "Player",
            type_link: "/docs/use/scenario/types/entities/#player",
          },
          {
            name: "item",
            description: "使用したあとのバケツのアイテムです。",
            type: "ItemStack",
            type_link: "/docs/use/scenario/types#item-stack",
          },
          {
            name: "bucket",
            description: "使用したバケツです。",
            type: "Enum{...Material}"
          },
          {
            name: "block",
            description: "バケツを使用したブロックです。",
            type: "Block",
            type_link: "/docs/use/scenario/types/misc#block",
          },
          {
            name: "blockFace",
            description: "ブロックの面です。",
            type: "BlockFace{UP, DOWN, NORTH, EAST, SOUTH, WEST}"
          },
          {
            name: "hand",
            description: "使用した手です。",
            type: "列挙型{HAND, OFF_HAND}",
            default: "HAND"
          },
        ]}
        executable={"バケツ内の液体をブロックに撒きます。"}
        watchable
/>

#### アクション実行シナリオでの使用 {#bucket-empty-usage-in-execution}

:::warning

`block` と `clickedBlock` のどちらか一方は必須です。

:::

:::danger

NMS の仕様上の都合により、 `block` を用いた液体の場所は `eventOnly` が `true` の場合にのみ有効です。

:::

#### `eventOnly` {#bucket-empty-event-only}

`eventOnly` を `true` に設定すると、引数に基づいてイベントのみを発火させ、バケツの中身を設置します。

:::info
通常はアクタに `PacketPlayInBlockPlace` パケットを送信させます。
引数 `clickedBlock` と `blockFace` に基づいて設置位置を決定します。
しかし、この指定方法は直感的でない上にプレイヤとブロックの位置に依存しているため、コストが高くなってしまいます。
そのため、直接イベントを発火させることで、よりかんたんにバケツの中身を設置できます。

:::

## バケツでの液体の回収 {#bucket-fill}


<Action name="バケツでの液体の回収"
        description="バケツでの液体の回収に関するアクションです。"
        id="player_bucket_fill"
        events={
          {
            name: "PlayerBucketFillEvent",
            package: "org.bukkit.event.player",
          }
        }
        args={[
          {
            name: "target",
            description: "バケツを使用するプレイヤです。",
            type: "Player",
            type_link: "/docs/use/scenario/types/entities/#player",
            required: [ScenarioType.EXECUTE]
          },
          {
            name: "bucket",
            description: "使用するバケツです。",
            type: "Enum{...Material}"
          },
          {
            name: "block",
            description: "バケツを使用するブロックです。",
            type: "Block",
            type_link: "/docs/use/scenario/types/misc#block",
          },
          {
            name: "clickedBlock",
            description: "バケツを使用するブロックです。",
            type: "Block",
            type_link: "/docs/use/scenario/types/misc#block",
          },
          {
            name: "blockFace",
            description: "ブロックの面です。",
            type: "BlockFace{UP, DOWN, NORTH, EAST, SOUTH, WEST}"
          },
          {
            name: "hand",
            description: "使用する手です。",
            type: "列挙型{HAND, OFF_HAND}",
            default: "HAND",
            available: [ScenarioType.WATCH]
          },
          {
            name: "eventOnly",
            anchor: "bucket-empty-event-only",
            description: "イベントのみ発火させるかどうかです。",
            type: ObjectType.BOOLEAN,
            default: "false",
            available: [ScenarioType.EXECUTE]
          }
        ]}
        outputs={[
          {
            name: "target",
            description: "バケツを使用したプレイヤです。",
            type: "Player",
            type_link: "/docs/use/scenario/types/entities/#player",
          },
          {
            name: "item",
            description: "使用したあとのバケツのアイテムです。",
            type: "ItemStack",
            type_link: "/docs/use/scenario/types#item-stack",
          },
          {
            name: "bucket",
            description: "使用したバケツです。",
            type: "Enum{...Material}"
          },
          {
            name: "block",
            description: "バケツを使用したブロックです。",
            type: "Block",
            type_link: "/docs/use/scenario/types/misc#block",
          },
          {
            name: "blockFace",
            description: "ブロックの面です。",
            type: "BlockFace{UP, DOWN, NORTH, EAST, SOUTH, WEST}"
          },
          {
            name: "hand",
            description: "使用した手です。",
            type: "列挙型{HAND, OFF_HAND}",
            default: "HAND"
          },
        ]}
        executable={"バケツ内の液体をブロックに撒きます。"}
        watchable
/>

#### アクション実行シナリオでの使用 {#bucket-empty-usage-in-execution}

:::warning

`block` と `clickedBlock` のどちらか一方は必須です。

:::

:::danger

NMS の仕様上の都合により、 `block` を用いた液体の場所は `eventOnly` が `true` の場合にのみ有効です。

:::

#### `eventOnly` {#bucket-fill-event-only}

`eventOnly` を `true` に設定すると、引数に基づいてイベントのみを発火させ、液体を回収します。


## 進捗の達成と達成度 {#advancement}

<Action name="進捗の達成と達成度"
        description="進捗の達成と達成度に関するアクションです。"
        id="player_advancement"
        events={[
          {
            name: "PlayerAdvancementDoneEvent",
            package: "org.bukkit.event.player"
          },
          {
            name: "PlayerAdvancementCriterionGrantEvent",
            package: "org.bukkit.event.player"
          }
        ]}
        args={[
          {
            name: "target",
            anchor: "target",
            description: "進捗を達成するプレイヤです。",
            type: "PlayerSpecifier",
            type_anchor: "#general-target",
            required: [ScenarioType.EXECUTE, ScenarioType.REQUIRE]
          },
          {
            name: "advancement",
            anchor: "advancement-advancement",
            description: "進捗です。",
            type: "NamespacedKey",
            type_link: "/docs/use/scenario/types/misc#namespaced-key",
            required: [ScenarioType.EXECUTE, ScenarioType.REQUIRE]
          },
          {
            name: "criterion",
            anchor: "advancement-criterion",
            description: "進捗の達成条件です。",
            type: ObjectType.STRING,
          }
        ]}
        outputs={[
          {
            name: "target",
            description: "進捗を達成したプレイヤです。",
            type: "Player",
            type_link: "/docs/use/scenario/types/entities/#player",
          },
          {
            name: "advancement",
            anchor: "advancement-advancement",
            description: "進捗です。",
            type_link: "/docs/use/scenario/types/misc#namespaced-key",
            type: "NamespacedKey",
          },
          {
            name: "criterion",
            anchor: "advancement-criterion",
            description: "進捗の達成条件です。",
            type: ObjectType.STRING,
          }
        ]}
        executable requireable watchable
/>

:::info

このアクションは進捗自体を達成する機能と、進捗の達成度を変更する機能を包含しています。  
`criterion` を指定せずに実行すると、**残っている達成条件を全て達成**します。一方で指定した場合は、指定した達成条件のみを達成します。

実行期待機能においても、 `criterion` を指定せずに実行すると、進捗自体を達成しているか判定します。  
一方で指定した場合は、指定した進捗の指定した達成条件を達成しているか判定します。

:::

#### アクション実行シナリオでの使用 {#advancement-usage-in-execution}

:::warning

出力 `criterion` は引数 `criterion` を指定した場合のみ出力されます。

:::

#### `advancement` {#advancement-advancement}

進捗を [`NamespacedKey`](/docs/use/scenario/types/misc#namespaced-key) で指定します。

#### `criterion` {#advancement-criterion}

進捗の達成条件を指定します。

アクション実行機能において省略した場合は、指定された進捗の**全ての達成条件を達成**します。

## アニメーション {#animation}

<Action name="プレイヤのアニメーション"
        description="プレイヤのアニメーションに関するアクションです。"
        id="player_animation"
        events={
          {
            name: "PlayerAnimationEvent",
            package: "org.bukkit.event.player",
          }
        }
        args={[
          {
            name: "target",
            anchor: "target",
            description: "アニメーションを実行するプレイヤです。",
            type: "PlayerSpecifier",
            type_anchor: "#general-target",
            required: [ScenarioType.EXECUTE],
          },
          {
            name: "type",
            anchor: "animation-type",
            description: "実行するアニメーションの種類です。",
            type: "列挙型{ARM_SWING}",
            required: [ScenarioType.EXECUTE],
          }
        ]}
        outputs={[
          {
            name: "target",
            anchor: "target",
            description: "アニメーションを実行したプレイヤです。",
            type: "Player",
            type_link: "/docs/use/scenario/types/entities/#player",
          },
          {
            name: "type",
            anchor: "animation-type",
            description: "実行するアニメーションの種類です。",
            type: "列挙型{ARM_SWING}",
          }
        ]}
        executable watchable
/>

#### `type` {#animation-type}

実行するアニメーションの種類を指定します。  

:::warning

Bukkit の仕様により、現在は `ARM_SWING` のみが指定可能です。  
また、将来の互換性を維持するために、この引数の省略はできません。

:::

## プレイヤによるエンティティのバケツへの格納 {#bucket-entity}

<Action name="プレイヤによるエンティティのバケツへの格納"
        description="プレイヤによるエンティティのバケツへの格納に関するアクションです。"
        id="player_bucket_entity"
        events={
          {
            name: "PlayerBucketEntityEvent",
            package: "org.bukkit.event.player",
          }
        }
        args={[
          {
            name: "target",
            description: "バケツに格納するエンティティを持っているプレイヤです。",
            type: "PlayerSpecifier",
            type_anchor: "#general-target",
            required: [ScenarioType.EXECUTE]
          },
          {
            name: "entity",
            description: "格納するエンティティです。",
            type: "EntitySpecifier",
            type_link: "/docs/use/scenario/types/entities#entity-specifier",
            required: [ScenarioType.EXECUTE]
          },
          {
            name: "bucket",
            description: "エンティティを入れるバケツです。",
            type: "ItemStack",
            type_link: "/docs/use/scenario/types#item-stack",
          },
          {
            name: "entityBucket",
            description: "エンティティが入ったバケツです。",
            type: "ItemStack",
            type_link: "/docs/use/scenario/types#item-stack",
          },
        ]}
        outputs={[
          {
            name: "target",
            description: "バケツに格納したプレイヤです。",
            type: "Player",
            type_link: "/docs/use/scenario/types/entities/#player",
          },
          {
            name: "entity",
            description: "格納したエンティティです。",
            type: "Entity",
            type_link: "/docs/use/scenario/types#entity",
          },
          {
            name: "bucket",
            description: "エンティティを入れるバケツです。",
            type: "ItemStack",
            type_link: "/docs/use/scenario/types#item-stack",
          },
          {
            name: "entityBucket",
            description: "エンティティが入ったバケツです。",
            type: "ItemStack",
            type_link: "/docs/use/scenario/types#item-stack",
            available: [ScenarioType.WATCH]
          },
        ]}
        executable watchable
/>

:::warning

`bucket` に指定するアイテムは、エンティティを格納できるバケツである必要があります（参考：1.16.5 時点では `WATER_BUCKET` のいｍ）。
`entityBucket` は、エンティティを格納した後のバケツを指定する必要があります。

:::

#### アクション実行シナリオでの使用 {#bucket-entity-usage-in-execution}

:::info

`bucket` を省略した場合は、プレイヤの持っているバケツを使用します。バケツを持っていない場合や対応していないバケツの場合は、アクションは失敗します。
これを指定し、かつプレイヤの持っているアイテムと異なる場合は、先にプレイヤのアイテムをこのバケツに置換します。

:::

:::warning

出力 `entityBucket` は引数 `entityBucket` を指定した場合のみ出力されます。

:::

## チャット {#chat}

<Action name="プレイヤのチャット"
        description="プレイヤのチャットに関するアクションです。"
        id="player_chat"
        events={
          {
            name: "PlayerChatEvent",
            package: "org.bukkit.event.player",
          }
        }
        args={[
          {
            name: "target",
            anchor: "target",
            description: "チャットを送信するプレイヤです。",
            type: "PlayerSpecifier",
            type_anchor: "#general-target",
            required: [ScenarioType.EXECUTE],
          },
          {
            name: "message",
            description: "送信するメッセージまたは検出用の正規表現です。",
            type: ObjectType.STRING,
            required: [ScenarioType.EXECUTE],
          },
          {
            name: "format",
            description: "チャットのフォーマットです。",
            type: ObjectType.STRING
          }
        ]}
        outputs={[
          {
            name: "target",
            anchor: "target",
            description: "チャットを送信したプレイヤです。",
            type: "Player",
            type_link: "/docs/use/scenario/types/entities/#player",
          },
          {
            name: "message",
            description: "送信したメッセージです。",
            type: ObjectType.STRING,
          },
          {
            name: "format",
            description: "チャットのフォーマットです。",
            type: ObjectType.STRING,
            available: [ScenarioType.WATCH],
          }
        ]}
        executable watchable
/>

:::warning

`format` はアクション実行シナリオでは使用できません。

:::

## 死亡およびキル {#death}

<Action name="プレイヤの死亡およびキル"
        description="プレイヤの死亡およびキルに関するアクションです。"
        id="player_death"
        events={
          {
            name: "PlayerDeathEvent",
            package: "org.bukkit.event.player"
          }
        }
        args={[
          {
            name: "target",
            anchor: "target",
            description: "死亡するプレイヤです。",
            type: "PlayerSpecifier",
            type_anchor: "#general-target",
            required: [ScenarioType.EXECUTE],
          },
          {
            name: "killer",
            description: "ターゲットを死亡させるプレイヤです。",
            type: "PlayerSpecifier",
            type_anchor: "#general-target",
          },
          {
            name: "deathMessage",
            description: "死亡メッセージです。",
            type: ObjectType.STRING,
            available: [ScenarioType.EXECUTE, ScenarioType.WATCH],
          },
          {
            name: "exp",
            description: "死亡したプレイヤの新しい経験値です。",
            type: ObjectType.INTEGER,
            default: "(ゲームルールによる)",
            available: [ScenarioType.EXECUTE, ScenarioType.WATCH],
          },
          {
            name: "totalExp",
            description: "死亡したプレイヤの新しい総経験値です。",
            type: ObjectType.INTEGER,
            default: "(ゲームルールによる)",
            available: [ScenarioType.EXECUTE, ScenarioType.WATCH],
          },
          {
            name: "keepLevel",
            description: "死亡したプレイヤのレベルを保持するかどうかです。",
            type: ObjectType.BOOLEAN,
            default: "(ゲームルールによる)",
            available: [ScenarioType.EXECUTE, ScenarioType.WATCH],
          },
          {
            name: "keepInventory",
            description: "死亡したプレイヤのインベントリ内容を保持するかどうかです。",
            type: ObjectType.BOOLEAN,
            default: "(ゲームルールによる)",
            available: [ScenarioType.EXECUTE, ScenarioType.WATCH],
          },
          {
            name: "keepExperience",
            description: "死亡したプレイヤの経験値を保持するかどうかです。",
            type: ObjectType.BOOLEAN,
            default: "(ゲームルールによる)",
            available: [ScenarioType.EXECUTE, ScenarioType.WATCH],
          },
          {
            name: "doExpDrop",
            description: "死亡したプレイヤの経験値ドロップを行うかどうかです。",
            type: ObjectType.BOOLEAN,
            default: "(ゲームルールによる)",
            available: [ScenarioType.EXECUTE, ScenarioType.WATCH],
          }
        ]}
        outputs={[
          {
            name: "target",
            anchor: "target",
            description: "死亡したプレイヤです。",
            type: "Player",
            type_link: "/docs/use/scenario/types/entities/#player",
          },
          {
            name: "killer",
            description: "殺したプレイヤです。",
            type: "Player",
            type_link: "/docs/use/scenario/types/entities/#player",
          },
          {
            name: "deathMessage",
            description: "死亡メッセージです。",
            type: ObjectType.STRING,
            available: [ScenarioType.WATCH],
          },
          {
            name: "exp",
            description: "死亡したプレイヤの新しい経験値です。",
            type: ObjectType.INTEGER,
            available: [ScenarioType.WATCH],
          },
          {
            name: "totalExp",
            description: "死亡したプレイヤの新しい総経験値です。",
            type: ObjectType.INTEGER,
            available: [ScenarioType.WATCH],
          },
          {
            name: "keepLevel",
            description: "死亡したプレイヤのレベルを保持するかどうかです。",
            type: ObjectType.BOOLEAN,
            available: [ScenarioType.WATCH],
          },
          {
            name: "keepInventory",
            description: "死亡したプレイヤのインベントリ内容を保持するかどうかです。",
            type: ObjectType.BOOLEAN,
            available: [ScenarioType.WATCH],
          },
          {
            name: "keepExperience",
            description: "死亡したプレイヤの経験値を保持するかどうかです。",
            type: ObjectType.BOOLEAN,
            available: [ScenarioType.WATCH],
          },
          {
            name: "doExpDrop",
            description: "死亡したプレイヤの経験値ドロップを行うかどうかです。",
            type: ObjectType.BOOLEAN,
            available: [ScenarioType.WATCH],
          }
        ]}
        executable={"プレイヤを殺害します。"}
        requireable
        watchable={"プレイヤが死亡しているかどうか判定します。"}
/>


## アイテムのドロップ {#drop-item}

<Action name="アイテムのドロップ"
        description="アイテムのドロップに関するアクションです。"
        id="player_drop_item"
        events={
          {
            name: "PlayerDropItemEvent",
            package: "org.bukkit.event.player"
          }
        }
        args={[
          {
            name: "target",
            anchor: "target",
            description: "アイテムをドロップするプレイヤです。",
            type: "PlayerSpecifier",
            type_anchor: "#general-target",
            required: [ScenarioType.EXECUTE],
          },
          {
            name: "item",
            description: "ドロップするアイテムです。",
            type: "EntityItem",
            type_link: "/docs/use/scenario/types#entity-item",
          }
        ]}
        outputs={[
          {
            name: "target",
            anchor: "target",
            description: "アイテムをドロップしたプレイヤです。",
            type: "Player",
            type_link: "/docs/use/scenario/types/entities/#player",
          },
          {
            name: "item",
            description: "ドロップしたアイテムです。",
            type: "EntityItem|ItemStack",
            anchor: "drop-item-output-item",
          }
        ]}
        executable watchable
/>

#### 出力 `item` {#drop-item-output-item}

:::warning

この出力の型はシナリオの種類によって異なります。

+ アクション実行シナリオでは、ドロップしたアイテムの [`ItemStack`](/docs/use/scenario/types/inventory-items/#item-stack) が出力されます。
+ 実行期待シナリオでは、ドロップしたアイテムの [`EntityItem`](/docs/use/scenario/types/entities#entity-item) が出力されます。
:::

## 飛行 {#flight}

<Action name="プレイヤの飛行"
        description="プレイヤの飛行に関するアクションです。"
        id="player_sneak"
        events={[
          {
            name: "PlayerToggleFlightEvent",
            package: "org.bukkit.event.player",
          }
        ]}
        args={[
          {
            name: "target",
            anchor: "target",
            description: "飛ぶプレイヤです。",
            type: "PlayerSpecifier",
            type_anchor: "#general-target",
            required: [ScenarioType.EXECUTE, ScenarioType.REQUIRE],
          },
          {
            name: "flying",
            description: "飛行中かどうかです。",
            type: ObjectType.BOOLEAN,
            required: [ScenarioType.EXECUTE, ScenarioType.REQUIRE]
          }
        ]}
        outputs={[
          {
            name: "target",
            anchor: "target",
            description: "飛行したプレイヤです。",
            type: "Player",
            type_link: "/docs/use/scenario/types/entities/#player",
          }
        ]}
        executable requireable watchable
/>

## ゲームモード {#gamemode}

<Action name="ゲームモード"
        description="プレイヤのゲームモードに関するアクションです。"
        id="player_gamemode"
        events={
          {
            name: "PlayerGameModeChangeEvent",
            package: "org.bukkit.event.player",
          }
        }
        args={[
          {
            name: "target",
            anchor: "target",
            description: "ゲームモードを変更するプレイヤです。",
            type: "PlayerSpecifier",
            type_anchor: "#general-target",
            required: [ScenarioType.EXECUTE, ScenarioType.REQUIRE]
          },
          {
            name: "gamemode",
            anchor: "gamemode-gamemode",
            description: "ゲームモードです。",
            type: "列挙型{SURVIVAL, CREATIVE, ADVENTURE, SPECTATOR}",
            required: [ScenarioType.EXECUTE, ScenarioType.REQUIRE]
          },
          {
            name: "cause",
            description: "ゲームモード変更の原因です。",
            type: "列挙型{PLUGIN, COMMAND, DEFAULT_GAMEMODE, HARDCORE_DEATH, UNKNOWN}",
            available: [ScenarioType.EXECUTE, ScenarioType.WATCH]
          },
          {
            name: "cancelMessage",
            anchor: "gamemode-cancel-message",
            description: "変更がキャンセルされた場合に表示するメッセージです（Paper)。",
            type: ObjectType.STRING,
            available: [ScenarioType.WATCH]
          }
        ]}
        outputs={[
          {
            name: "target",
            anchor: "target",
            description: "ゲームモードを変更したプレイヤです。",
            type: "Player",
            type_link: "/docs/use/scenario/types/entities/#player",
          },
          {
            name: "gamemode",
            anchor: "gamemode-gamemode",
            description: "ゲームモードです。",
            type: "列挙型{SURVIVAL, CREATIVE, ADVENTURE, SPECTATOR}",
          },
          {
            name: "cause",
            description: "ゲームモード変更の原因です。",
            type: "列挙型{PLUGIN, COMMAND, DEFAULT_GAMEMODE, HARDCORE_DEATH, UNKNOWN}",
            available: [ScenarioType.WATCH]
          },
          {
            name: "cancelMessage",
            anchor: "gamemode-cancel-message",
            description: "変更がキャンセルされた場合に表示するメッセージです（Paper)。",
            type: ObjectType.STRING,
            available: [ScenarioType.WATCH]
          }
        ]}
        executable requireable watchable
/>

#### `gamemode` {#gamemode-gamemode}

ゲームモードを指定します。

:::danger

`gamemode` は上記に示す列挙型のみ指定できます。  
Minecraft 旧バージョンで使用できるゲームモード ID(`integer`: `0` 〜 `3`)は指定できません。

:::

#### `cancelMessage` {#gamemode-cancel-message}

変更がキャンセルされた場合に表示するメッセージを指定します。

:::tip

この項目は PaperMC による変更で追加された項目です。  
詳しい動作は各ドキュメントを参照してください。

:::

## 作物の収穫 {#harvest-block}


<Action name="作物の収穫"
        description="プレイヤの作物の収穫に関するアクションです。"
        id="player_harvest_block"
        events={
          {
            name: "PlayerHarvestBlockEvent",
            package: "org.bukkit.event.player",
          }
        }
        args={[
          {
            name: "target",
            anchor: "target",
            description: "ゲームモードを変更するプレイヤです。",
            type: "PlayerSpecifier",
            type_anchor: "#general-target",
            required: [ScenarioType.EXECUTE]
          },
          {
            name: "block",
            description: "収穫するブロックです。",
            type: "Block",
            type_link: "/docs/use/scenario/types/misc#block",
            required: [ScenarioType.EXECUTE]
          },
          {
            name: "items",
            description: "収穫したアイテムです。",
            type: "ItemStack[]",
            type_link: "/docs/use/scenario/types#item-stack",
            available: [ScenarioType.WATCH]
          }
        ]}
        outputs={[
          {
            name: "target",
            anchor: "target",
            description: "収穫したプレイヤです。",
            type: "Player",
            type_link: "/docs/use/scenario/types/entities/#player",
          },
          {
            name: "block",
            description: "収穫したブロックです。",
            type: "Block",
            type_link: "/docs/use/scenario/types/misc#block",
          },
          {
            name: "items",
            description: "収穫したアイテムです。",
            type: "ItemStack[]",
            type_link: "/docs/use/scenario/types#item-stack",
            available: [ScenarioType.WATCH]
          }
        ]}
        executable watchable
/>

#### アクション実行シナリオでの使用 {#harvest-block-usage-in-execution}

:::tip
このアクションは、内部的に [`BlockBreakAction`](block#break) を呼び出しています。

:::


## ホットバーの選択中スロットの変更 {#hotbar}

<Action name="ホットバーの選択中スロットの変更"
        description="ホットバーの選択中スロットの変更に関するアクションです。"
        id="player_hotbar"
        events={
          {
            name: "PlayerItemHeldEvent",
            package: "org.bukkit.event.player",
          }
        }
        args={[
          {
            name: "target",
            description: "ホットバーのスロットを変更するプレイヤです。",
            type: "PlayerSpecifier",
            type_anchor: "#general-target",
            required: [ScenarioType.EXECUTE]
          },
          {
            name: "slot",
            anchor: "hotbar-slot",
            description: "ホットバーのスロットです。",
            type: ObjectType.INTEGER,
            required: [ScenarioType.EXECUTE]
          },
          {
            name: "previous",
            anchor: "hotbar-slot",
            description: "変更前のホットバーのスロットです。",
            type: ObjectType.INTEGER,
            available: [ScenarioType.EXECUTE, ScenarioType.WATCH]
          },
          {
            name: "item",
            anchor: "hotbar-item",
            description: "ホットバーのスロットにあるアイテムです。",
            type: "ItemStack",
            type_link: "/docs/use/scenario/types/inventory-items#item-stack",
          },
        ]}
        outputs={[
          {
            name: "target",
            description: "ホットバーのスロットを変更したプレイヤです。",
            type: "PlayerSpecifier",
            type_anchor: "#general-target",
            required: [ScenarioType.EXECUTE, ScenarioType.REQUIRE]
          },
          {
            name: "slot",
            description: "ホットバーのスロットです。",
            type: ObjectType.INTEGER,
          },
          {
            name: "previous",
            description: "変更前のホットバーのスロットです。",
            type: ObjectType.INTEGER,
            available: [ScenarioType.WATCH]
          },
          {
            name: "item",
            description: "ホットバーのスロットにあるアイテムです。",
            type: "ItemStack",
            type_link: "/docs/use/scenario/types/inventory-items#item-stack",
          },
        ]}
        executable requireable watchable
/>

#### `slot`, `previous` {#hotbar-slot}

ホットバーのスロットは `0` から `8` の整数で指定します。

:::tip スロットのナンバリングについて

一見 1 ~ 9 ではなく, 0 ～ 8 で指定するのは不思議に思うかもしれませんが,
これは Minecraft のインベントリのスロット ID 仕様によるものです。

インベントリはホットバー#1 が 0, #2 が 1, ... となっています。  
そのため, Scenamatica では統一性を保つためにホットバーのスロットも 0 ～ 8 で指定します。

:::

#### `item` {#hotbar-item}

この型は[こちら](/docs/use/scenario/types#item-stack)を参照してください。

## エンティティのクリック（作用） {#interact-at-entity}

:::warning DEPRECATED!!!

このアクションは、**アーマースタンドのクリックのみ**をサポートしています。  
ほとんどの場合は、 [プレイヤのエンティティのクリック](#interact-entity) を使用してください。

出典：[PlayerInteractAtEntityEvent (Paper-API 1.16.5-R0.1-SNAPSHOT API)](https://jd.papermc.io/paper/1.16/org/bukkit/event/player/PlayerInteractAtEntityEvent.html#:~:text=Users%20are%20advised%20to%20listen%20to%20this%20(parent)%20class%20unless%20specifically%20required.%0ANote%20that%20interacting%20with%20Armor%20Stands%20fires%20this%20event%20only%20and%20not%20its%20parent%20and%20as%20such%20users%20are%20expressly%20required%20to%20listen%20to%20this%20event%20for%20that%20scenario.)

:::

<Action name="プレイヤのエンティティの相互作用"
        description="プレイヤのエンティティのクリックに関するアクションです。"
        id="player_interact_at_entity"
        events={
          {
            name: "PlayerInteractAtEntityEvent",
            package: "org.bukkit.event.player",
          }
        }
        args={[
          {
            name: "target",
            type: "PlayerSpecifier",
            type_anchor: "#general-target",
            description: "クリックしたプレイヤです。",
            required: [ScenarioType.EXECUTE]
          },
          {
            name: "entity",
            type: "EntitySpecifier",
            type_anchor: "/docs/use/scenario/types/entities#entity-specifier",
            description: "クリックした対象のエンティティです。",
            required: [ScenarioType.EXECUTE]
          },
          {
            name: "hand",
            type: "列挙型{HAND, OFF_HAND}",
            description: "クリックする手です。",
          },
          {
            name: "position",
            type: "Vector(Location)",
            type_link: "/docs/use/scenario/types/misc#location",
            description: "クリックするエンティティの位置です。",
            required: [ScenarioType.EXECUTE]
          }
        ]}
        outputs={[
          {
            name: "target",
            type: "Player",
            type_link: "/docs/use/scenario/types/entities/#player",
            description: "クリックした対象のエンティティです。",
          },
          {
            name: "entity",
            type: "Entity",
            type_link: "/docs/use/scenario/types/entities#entity",
            description: "クリックした対象のエンティティです。",
          },
          {
            name: "hand",
            type: "列挙型{HAND, OFF_HAND}",
            description: "クリックする手です。",
          },
          {
            name: "position",
            type: "Vector(Location)",
            type_link: "/docs/use/scenario/types/misc#location",
            description: "クリックするエンティティの位置です。",
          }
        ]}
        executable watchable
/>

:::info

このアクションは、 [プレイヤのエンティティのクリック](#interact-entity) の子アクションで、
諸々の仕様や引数を継承しています。

:::

## ブロックのクリック {#interact-block}

<Action name="プレイヤのブロックのクリック"
        description="プレイヤのブロックのクリックに関するアクションです。"
        id="player_interact_block"
        events={
          {
            name: "PlayerInteractEvent",
            package: "org.bukkit.event.player",
          }
        }
        args={[
          {
            name: "target",
            anchor: "target",
            description: "ブロックをクリックするプレイヤです。",
            type: "PlayerSpecifier",
            type_anchor: "#general-target",
            required: [ScenarioType.EXECUTE]
          },
          {
            name: "block",
            anchor: "block",
            description: "クリックされたブロックです。",
            type: "Block",
            type_anchor: "interact-block-block"
          },
          {
            name: "hand",
            anchor: "hand",
            description: "クリックされた手です。",
            type: "列挙型{HAND, OFF_HAND}"
          },
          {
            name: "action",
            anchor: "action",
            description: "クリックの種類です。",
            type: "列挙型{LEFT_CLICK_BLOCK, RIGHT_CLICK_BLOCK, LEFT_CLICK_AIR, RIGHT_CLICK_AIR}"
          }
        ]}
        outputs={[
          {
            name: "target",
            anchor: "target",
            description: "ブロックをクリックしたプレイヤです。",
            type: "Player",
            type_link: "/docs/use/scenario/types/entities/#player",
          },
          {
            name: "block",
            anchor: "block",
            description: "クリックされたブロックです。",
            type: "Block",
            type_link: "/docs/use/scenario/types/misc#block"
          },
          {
            name: "blockFace",
            anchor: "block-face",
            description: "クリックされたブロックの面です。",
            type: "列挙型{NORTH, EAST, SOUTH, WEST, UP, DOWN, SELF}",
            available: [ScenarioType.WATCH]
          },
          {
            name: "hand",
            anchor: "hand",
            description: "クリックされた手です。",
            type: "列挙型{HAND, OFF_HAND}"
          },
          {
            name: "action",
            anchor: "action",
            description: "クリックの種類です。",
            type: "列挙型{LEFT_CLICK_BLOCK, RIGHT_CLICK_BLOCK, LEFT_CLICK_AIR, RIGHT_CLICK_AIR}"
          }
        ]}
        executable watchable
/>

#### `block` {#interact-block-block}

<BelowDocument docId="use/scenario/types/misc"
               anchor="block"
               label="Block 型"
/>

## エンティティのクリック {#interact-entity}

<Action name="プレイヤのエンティティのクリック"
        description="プレイヤのエンティティのクリックに関するアクションです。"
        id="player_interact_entity"
        events={
          {
            name: "PlayerInteractEntityEvent",
            package: "org.bukkit.event.player",
          }
        }
        args={[
          {
            name: "target",
            type: "PlayerSpecifier",
            type_anchor: "#general-target",
            description: "クリックしたプレイヤです。",
            required: [ScenarioType.EXECUTE]
          },
          {
            name: "entity",
            type: "EntitySpecifier",
            type_anchor: "/docs/use/scenario/types/entities#entity-specifier",
            description: "クリックした対象のエンティティです。",
            required: [ScenarioType.EXECUTE]
          },
          {
            name: "hand",
            type: "列挙型{HAND, OFF_HAND}",
            description: "クリックする手です。",
            default: "HAND(on execute action)"
          }
        ]}
        outputs={[
          {
            name: "target",
            type: "Player",
            type_link: "/docs/use/scenario/types/entities/#player",
            description: "クリックした対象のエンティティです。",
          },
          {
            name: "entity",
            type: "Entity",
            type_link: "/docs/use/scenario/types/entities#entity",
            description: "クリックした対象のエンティティです。",
          },
          {
            name: "hand",
            type: "列挙型{HAND, OFF_HAND}",
            description: "クリックした手です。",
          }
        ]}
        executable watchable
/>

#### アクション実行シナリオでの使用 {#interact-entity-usage-in-execution}

プレイヤにエンティティをクリックさせます。

:::danger

プレイヤとエンティティの距離が `36.0` ブロックより離れている場合は、 Scenamatica はイベントのみを発行します。
通常はアクタから `PacketPlayInUseEntity` パケットが送信され、エンティティのクリックが再現されますが、
Minecraft による仕様のために、距離が離れすぎている場合は意味をなさないからです。

:::
 

## アイテムの破壊 {#item-break}

<Action name="プレイヤのアイテムの破壊"
        description="プレイヤのアイテムの破壊に関するアクションです。"
        id="player_item_break"
        events={
          {
            name: "PlayerItemBreakEvent",
            package: "org.bukkit.event.player",
          }
        }
        args={[
          {
            name: "target",
            anchor: "target",
            description: "破壊されるアイテムを持っているプレイヤです。",
            type: "PlayerSpecifier",
            type_anchor: "#general-target",
            required: [ScenarioType.EXECUTE]
          },
          {
            name: "item",
            description: "破壊されるアイテムです。",
            type: "ItemStack",
            type_link: "/docs/use/scenario/types#item-stack",
          },
          {
            name: "slot",
            description: "破壊されるアイテムがあるスロットです。",
            type: "列挙型{HAND, OFF_HAND, HEAD, CHEST, LEGS, FEET}",
            default: "アクション実行モードの場合は HAND"
          }
        ]}
        outputs={[
          {
            name: "target",
            anchor: "target",
            description: "破壊されたアイテムを持っているプレイヤです。",
            type: "Player",
            type_link: "/docs/use/scenario/types/entities/#player",
          },
          {
            name: "item",
            description: "破壊されたアイテムです。",
            type: "ItemStack",
            type_link: "/docs/use/scenario/types#item-stack",
          },
          {
            name: "slot",
            description: "破壊されたアイテムがあるスロットです。",
            type: "列挙型{HAND, OFF_HAND, HEAD, CHEST, LEGS, FEET}",
            available: [ScenarioType.EXECUTE]
          }
        ]}
        executable watchable
/>

#### アクション実行シナリオでの使用 {#item-break-usage-in-execution}

`item` が設定されていた場合は、破壊する前にそのアイテムを `slot` に設定します。
`slot` はこのモードではデフォルトで `HAND` になります。

## アイテムの消費 {#item-consume}

<Action name="プレイヤのアイテムの消費"
        description="プレイヤのアイテムの消費に関するアクションです。"
        id="player_item_consume"
        events={
          {
            name: "PlayerItemConsumeEvent",
            package: "org.bukkit.event.player",
          }
        }
        args={[
          {
            name: "target",
            anchor: "target",
            description: "アイテムを消費するプレイヤです。",
            type: "PlayerSpecifier",
            type_anchor: "#general-target",
            required: [ScenarioType.EXECUTE]
          },
          {
            name: "item",
            description: "消費されるアイテムです。",
            type: "ItemStack",
            type_link: "/docs/use/scenario/types#item-stack",
          },
          {
            name: "replacement",
            description: "消費されるアイテムの代わりに与えられるアイテムです。",
            type: "ItemStack",
            type_link: "/docs/use/scenario/types#item-stack",
            available: [ScenarioType.WATCH]
          }
        ]}
        outputs={[
          {
            name: "target",
            anchor: "target",
            description: "アイテムを消費したプレイヤです。",
            type: "Player",
            type_link: "/docs/use/scenario/types/entities/#player",
          },
          {
            name: "item",
            description: "消費されたアイテムです。",
            type: "ItemStack",
            type_link: "/docs/use/scenario/types#item-stack",
          },
          {
            name: "replacement",
            description: "消費されたアイテムの代わりに与えられるアイテムです。",
            type: "ItemStack",
            type_link: "/docs/use/scenario/types#item-stack",
          }
        ]}
        executable watchable 
/>

#### アクション実行シナリオでの使用 {#item-consume-usage-in-execution}

プレイヤの利き手にあるアイテムを消費します。  

`item` に消費するアイテムを指定した場合は、消費の開始前にアイテムが**利き手に設定**されます。
その場合は、 `item` には有効な食料アイテムか、ミルクバケツ、またはポーションである必要があります。

`replacement` は使用**できません**。

:::danger

このアクションは、実行の完了までに、アイテムの消費にかかる時間分だけ掛かります。
そのため、適切なタイムアウト（約 `20ticks * 2sec = 40ticks`）を設定する必要があります。

:::

## アイテムへのダメージ {#item-damage}

<Action name="プレイヤのアイテムへのダメージ"
        description="プレイヤのアイテムへのダメージに関するアクションです。"
        id="player_item_damage"
        events={
          {
            name: "PlayerItemDamageEvent",
            package: "org.bukkit.event.player",
          }
        }
        args={[
          {
            name: "target",
            description: "ダメージを与えるアイテムを持つプレイヤです。",
            type: "PlayerSpecifier",
            type_anchor: "#general-target",
            required: [ScenarioType.EXECUTE, ScenarioType.REQUIRE]
          },
          {
            name: "item",
            anchor: "item-damage-item",
            description: "ダメージを与えられるアイテムです。",
            type: "ItemStack",
            type_link: "/docs/use/scenario/types#item-stack",
            required: [ScenarioType.EXECUTE, ScenarioType.REQUIRE]
          },
          {
            name: "damage",
            description: "与えるダメージです。",
            type: ObjectType.INTEGER,
            required : [ScenarioType.EXECUTE]
          },
          {
            name: "slot",
            description: "ダメージを与えられるアイテムがあるスロットです。",
            type: "列挙型{HAND, OFF_HAND, HEAD, CHEST, LEGS, FEET}",
            default: "アクション実行モードの場合は HAND"
          }
        ]}
        outputs={[
          {
            name: "target",
            description: "ダメージを与えたプレイヤです。",
            type: "Player",
            type_link: "/docs/use/scenario/types/entities/#player",
          },
          {
            name: "item",
            anchor: "item-damage-item",
            description: "ダメージを与えられたアイテムです。",
            type: "ItemStack",
            type_link: "/docs/use/scenario/types#item-stack",
          },
          {
            name: "damage",
            description: "与えたダメージです。",
            type: ObjectType.INTEGER,
          },
          {
            name: "slot",
            description: "ダメージを与えられたアイテムがあるスロットです。",
            type: "列挙型{HAND, OFF_HAND, HEAD, CHEST, LEGS, FEET}",
            available: [ScenarioType.EXECUTE]
          }
        ]}
        outputs={[
          {
            name: "target",
            description: "ダメージを与えたプレイヤです。",
            type: "Player",
            type_link: "/docs/use/scenario/types/entities/#player",
          },
          {
            name: "item",
            anchor: "item-damage-item",
            description: "ダメージを与えられたアイテムです。",
            type: "ItemStack",
            type_link: "/docs/use/scenario/types#item-stack",
          },
          {
            name: "damage",
            description: "与えたダメージです。",
            type: ObjectType.INTEGER,
          }
        ]}
        executable watchable requireable={"装備スロットにあるアイテムのダメージが一致するか判定します。"}
/>

#### アクション実行シナリオでの使用 {#item-damage-usage-in-execution}

`item` が設定されていた場合は、ダメージを与える前にそのアイテムを `slot` に設定します。  
`slot` はこのモードでは デフォルトで `HAND` になります。

#### 条件要求シナリオでの使用 {#item-damage-usage-in-requirement}

`slot` を省略した場合は、プレイヤの全ての装備スロットにあるアイテムのダメージが一致するか判定します。  
`item` を指定した場合は、そのアイテムのダメージが一致するか判定します（どれか一つでも一致する場合は真）。

#### `item` {#item-damage-item}

:::danger

`item` で指定できるアイテムは、その [ItemMeta](https://jd.papermc.io/paper/1.16/org/bukkit/inventory/meta/ItemMeta.html) が [Damageable](https://jd.papermc.io/paper/1.16/org/bukkit/inventory/meta/Damageable.html) 
を実装しているアイテムのみです。

:::

## 参加 {#join}

<Action name="プレイヤの参加"
        description="プレイヤの参加に関するアクションです。"
        id="player_join"
        events={
          {
            name: "PlayerJoinEvent",
            package: "org.bukkit.event.player",
          }
        }
        args={[
          {
            name: "target",
            anchor: "target",
            description: "参加するプレイヤです。",
            type: "PlayerSpecifier",
            type_anchor: "#general-target",
            required: [ScenarioType.EXECUTE] 
          }
        ]}
        outputs={[
          {
            name: "target",
            anchor: "target",
            description: "参加したプレイヤです。",
            type: "Player",
            type_link: "/docs/use/scenario/types/entities/#player",
          },
          {
            name: "message",
            description: "参加メッセージです。",
            type: ObjectType.STRING,
            available: [ScenarioType.WATCH]
          }
        ]}
        executable
        requireable={"プレイヤがオンラインかどうか判定します。"}
        watchable
/>

## キック {#kick}

<Action name="プレイヤのキック"
        description="プレイヤのキックに関するアクションです。"
        id="player_kick"
        events={
          {
            name: "PlayerKickEvent",
            package: "org.bukkit.event.player",
          }
        }
        args={[
          {
            name: "target",
            anchor: "target",
            description: "キックされるプレイヤです。",
            type: "PlayerSpecifier",
            type_anchor: "#general-target",
            required: [ScenarioType.EXECUTE, ScenarioType.WATCH]
          },
          {
            name: "leaveMessage",
            anchor: "kick-leave-message",
            description: "コンソールとサーバ上のプレイヤ全員に表示されるメッセージです。",
            type: ObjectType.STRING,
            available: [ScenarioType.WATCH]
          },
          {
            name: "message",
            description: "キックされたプレイヤに表示されるメッセージです。",
            type: ObjectType.STRING
          },
          {
            name: "cause",
            anchor: "kick-cause",
            description: "キックの理由です。",
            type: "列挙型{...}",
            type_anchor: "kick-cause"
          }
        ]}
        outputs={[
          {
            name: "target",
            anchor: "target",
            description: "キックされたプレイヤです。",
            type: "Player",
            type_link: "/docs/use/scenario/types/entities/#player",
          },
          {
            name: "leaveMessage",
            anchor: "kick-leave-message",
            description: "コンソールとサーバ上のプレイヤ全員に表示されるメッセージです。",
            type: ObjectType.STRING,
            available: [ScenarioType.WATCH]
          },
          {
            name: "message",
            description: "キックされたプレイヤに表示されるメッセージです。",
            type: ObjectType.STRING
          },
          {
            name: "cause",
            anchor: "kick-cause",
            description: "キックの理由です。",
            type: "列挙型{...}",
            type_anchor: "kick-cause"
          }
        ]}
        executable watchable
/>

#### `leaveMessage` {#kick-leave-message}

:::warning
アクション実行期待モードでは使用できません。
:::

### 列挙型： KickCause {#kick-cause}
| 列挙型名                       | 説明                 |
|:---------------------------|:-------------------|
| `PLUGIN`                   | プラグインによるキック        |
| `WHITELIST`                | ホワイトリストに存在しないプレイヤ  |
| `BANNED`                   | 追放されたプレイヤ          |
| `IP_BANNED`                | IPアドレスが追放されたプレイヤ   |
| `KICK_COMMAND`             | `/kick` コマンドによるキック |
| `FLYING_PLAYER`            | 飛行したプレイヤ           |
| `FLYING_VEHICLE`           | 乗り物が飛行した           |
| `TIMEOUT`                  | タイムアウト             |
| `IDLING`                   | 放置                 |
| `INVALID_VEHICLE_MOVEMENT` | 不正な乗り物の動き          |
| `INVALID_PLAYER_MOVEMENT`  | 不正なプレイヤの動き         |
| `INVALID_ENTITY_ATTACKED`  | 不正な攻撃              |
| `INVALID_PAYLOAD`          | 不正なペイロード           |
| `SPAM`                     | スパム                |
| `ILLEGAL_ACTION`           | 不正な行動              |
| `ILLEGAL_CHARACTERS`       | 不正な文字              |
| `SELF_INTERACTION`         | 自分自身とのやり取り         |
| `DUPLICATE_LOGIN`          | 重複ログイン             |
| `RESTART_COMMAND`          | Spigotの再起動コマンド     |
| `UNKNOWN`                  | 不明                 |

## 経験レベルの変更 {#level-change}

<Action name="プレイヤの経験レベルの変更"
        description="プレイヤの経験レベルの変更に関するアクションです。"
        id="player_change_level"
        events={
          {
            name: "PlayerLevelChangeEvent",
            package: "org.bukkit.event.player",
          }
        }
        args={[
          {
            name: "target",
            anchor: "target",
            description: "経験レベルを変更するプレイヤです。",
            type: "PlayerSpecifier",
            type_anchor: "#general-target",
            required: [ScenarioType.EXECUTE, ScenarioType.REQUIRE]
          },
          {
            name: "level",
            anchor: "level",
            description: "新しい経験レベルです。",
            type: ObjectType.INTEGER,
            required: [ScenarioType.EXECUTE, ScenarioType.REQUIRE]
          },
          {
            name: "oldLevel",
            anchor: "old-level",
            description: "変更前の経験レベルです。",
            type: ObjectType.INTEGER,
            available: [ScenarioType.WATCH]
          }
        ]}
        outputs={[
          {
            name: "target",
            type: "Player",
            type_link: "/docs/use/scenario/types/entities#player",
            description: "経験レベルを変更したプレイヤです。",
          },
          {
            name: "level",
            description: "新しい経験レベルです。",
            type: ObjectType.INTEGER,
          },
          {
            name: "oldLevel",
            description: "変更前の経験レベルです。",
            type: ObjectType.INTEGER,
            available: [ScenarioType.EXECUTE, ScenarioType.WATCH]
          }
        ]}
        executable
        requireable={"プレイヤの経験レベルが指定したに値なっているか判定します。"}
        watchable
/>

## 移動 {#move}

<Action name="プレイヤの移動"
        description="プレイヤの移動に関するアクションです。"
        id="player_move"
        events={
          {
            name: "PlayerMoveEvent",
            package: "org.bukkit.event.player",
          }
        }
        args={[
          {
            name: "target",
            anchor: "target",
            description: "移動するプレイヤです。",
            type: "PlayerSpecifier",
            type_anchor: "#general-target",
            required: [ScenarioType.EXECUTE]
          },
          {
            name: "from",
            description: "移動前の座標です。",
            type: "Location",
            type_link: "/docs/use/scenario/types/misc#location",
            available: [ScenarioType.EXECUTE]
          },
          {
            name: "to",
            description: "移動後の座標です。",
            type: "Location",
            type_link: "/docs/use/scenario/types/misc#location",
            available: [ScenarioType.EXECUTE]
          }
        ]}
        outputs={[
          {
            name: "target",
            type: "Player",
            type_link: "/docs/use/scenario/types/entities#player",
            description: "移動したプレイヤです。",
          },
          {
            name: "from",
            description: "移動前の座標です。",
            type: "Location",
            type_link: "/docs/use/scenario/types/misc#location",
          },
          {
            name: "to",
            description: "移動後の座標です。",
            type: "Location",
            type_link: "/docs/use/scenario/types/misc#location",
          },
        ]}
        executable={"プレイヤを指定された座標にテレポートさせます。"}
        watchable
/>

:::tip

アクション実行期待シナリオにおける座標の比較は、誤差 `0.01` まで許容されます。

:::

## 投げ物の発射 {#launch-projectile}

<Action name="プレイヤの投げ物の発射"
        description="プレイヤの投げ物の発射に関するアクションです。"
        id="player_projectile_launch"
        events={
          {
            name: "ProjectileLaunchEvent",
            package: "org.bukkit.event.entity",
          }
        }
        args={[
          {
            name: "target",
            anchor: "target",
            description: "投げ物を発射するプレイヤです。",
            type: "PlayerSpecifier",
            type_anchor: "#general-target",
            required:[ScenarioType.EXECUTE]
          },
          {
            name: "type",
            anchor: "launch-projectile-type",
            description: "発射される投げ物の種類です。",
            type: "Enum{...}",
            required: [ScenarioType.EXECUTE, ScenarioType.WATCH]
          },
          {
            name: "epsilon",
            anchor: "launch-projectile-epsilon",
            description: "投げ物の発射ベクトルの有効数字です。",
            type: ObjectType.DOUBLE,
            default: "0.001",
            available: [ScenarioType.WATCH]
          }
        ]}
        outputs={[
          {
            name: "target",
            anchor: "target",
            description: "投げ物を発射したプレイヤです。",
            type: "Player",
            type_link: "/docs/use/scenario/types/entities/#player",
          },
          {
            name: "projectile",
            anchor: "launch-projectile-out-projectile",
            description: "発射された投げ物です。",
            type: "Projectile",
            type_link: "/docs/use/scenario/types/entities#projectile",
          }
        ]}
        executable watchable
/>

#### `type` {#launch-projectile-type}

発射される投げ物の種類を指定します。以下の種類が指定できます。

|         種類          | 説明         |
|:-------------------:|:-----------|
|       `ARROW`       | 矢          |
|     `SNOWBALL`      | 雪玉         |
|        `EGG`        | 卵          |
|     `FIREBALL`      | ファイアーチャージ  |
|  `SMALL_FIREBALL`   | 小型の火球      |
|    `ENDER_PEARL`    | エンダーパール    |
|   `WITHER_SKULL`    | ウィザーの頭     |
|  `SHULKER_BULLET`   | シュルカーの弾丸   |
|  `DRAGON_FIREBALL`  | エンドドラゴンの火球 |
|      `POTION`       | ポーション      |
| `EXPERIENCE_BOTTLE` | 経験値ボトル     |
|       `ITEM`        | アイテム       |
|     `FIREWORK`      | 花火         |
|      `TRIDENT`      | トライデント     |


#### `epsilon` {#launch-projectile-epsilon}

投げ物をアクションで比較すする際に許容される誤差を指定します。

#### `projectile` {#launch-projectile-out-projectile}

:::danger

出力 `projectile` は、怠惰な出力です。  
そのため、これの直後にあるアクション実行期待からは参照できません。

:::

## 退出 {#quit}

<Action name="プレイヤの退出"
        description="プレイヤの退出に関するアクションです。"
        id="player_quit"
        events={
          {
            name: "PlayerQuitEvent",
            package: "org.bukkit.event.player",
          }
        }
        args={[
          {
            name: "target",
            anchor: "target",
            description: "退出するプレイヤです。",
            type: "PlayerSpecifier",
            type_anchor: "#general-target",
            required: [ScenarioType.EXECUTE]
          },
          {
            name: "message",
            anchor: "quit-message",
            description: "退出時のメッセージです。",
            type: ObjectType.STRING
          },
          {
            name: "reason",
            anchor: "quit-reason",
            description: "退出の理由です。",
            type: "列挙型{DISCONNECTED, KICKED, TIMED_OUT, ERRONEOUS_STATE}",
            default: "アクション実行シナリオの場合は KICKED, 他は N/A "
          }
        ]}
        outputs={[
          {
            name: "target",
            type: "Player",
            type_link: "/docs/use/scenario/types/entities#player",
            description: "退出したプレイヤです。",
          },
          {
            name: "message",
            description: "退出時のメッセージです。",
            type: ObjectType.STRING,
          },
          {
            name: "reason",
            description: "退出の理由です。",
            type: "列挙型{DISCONNECTED, KICKED, TIMED_OUT, ERRONEOUS_STATE}",
            default: "アクション実行シナリオの場合は KICKED, 他は N/A "
          }
        ]}
        executable 
        requireable={"プレイヤがオフラインかどうか判定します。"}
        watchable
/>

プレイヤの一般的な退出に関するアクションです。

:::tip
キックされた理由等などを使用したシナリオを作成する場合は、[プレイヤのキック](#kick) アクションを使用してください。
:::

#### アクション実行シナリオでの使用 {#quit-usage-in-execution}

:::warning

出力 `message` は入力 `reason` が `KICKED` の場合のみ有効です。

:::

#### `message` {#quit-message}

退出時のメッセージを指定します。

:::warning
条件要求シナリオでは使用できません。
:::

:::danger

理由がキックの場合, キックされた理由がここに設定されます。  
したがって、退出理由は翻訳可能コンポーネント`multiplayer.player.left`になるため、このアクションでは判定できません。

:::

#### `reason` {#quit-reason}

以下の理由が使用できます：

| 種類                | 説明                      |
|:------------------|:------------------------|
| `DISCONNECTED`    | プレイヤが自らサーバから退出した場合      |
| `KICKED`          | プレイヤがキックされた場合           |
| `TIMED_OUT`       | プレイヤがタイムアウトした場合         |
| `ERRONEOUS_STATE` | パケットハンドラ内などで例外が発生した場合など |

## リスポーン {#respawn}

<Action name="プレイヤのリスポーン"
        description="プレイヤのリスポーンに関するアクションです。"
        id="player_respawn"
        events={[
          {
            name: "PlayerRespawnEvent",
            package: "org.bukkit.event.player",
          },
          {
            name: "PlayerPostRespawnEvent",
            package: "io.papermc.paper.event.player",
          }
        ]}
        args={[
          {
            name: "target",
            anchor: "target",
            description: "リスポーンするプレイヤです。",
            type: "PlayerSpecifier",
            type_anchor: "#general-target",
            required: [ScenarioType.EXECUTE]
          },
          {
            name: "isBed",
            description: "ベッドでリスポーンするかどうかです。",
            type: ObjectType.BOOLEAN,
            available: [ScenarioType.WATCH]
          },
          {
            name: "location",
            anchor: "respawn-location",
            description: "リスポーンする場所です。",
            type: "Location",
            type_link: "/docs/use/scenario/types/misc#location",
          },
          {
            name: "isAnchor",
            description: "アンカでリスポーンするかどうかです。",
            type: ObjectType.BOOLEAN,
            available: [ScenarioType.WATCH]
          }
        ]}
        outputs={[
          {
            name: "target",
            type: "Player",
            type_link: "/docs/use/scenario/types/entities#player",
            description: "リスポーンしたプレイヤです。",
          },
          {
            name: "location",
            description: "リスポーンした場所です。",
            type: "Location",
            type_link: "/docs/use/scenario/types/misc#location",
          },
          {
            name: "isBed",
            description: "ベッドでリスポーンしたかどうかです。",
            type: ObjectType.BOOLEAN,
            available: [ScenarioType.WATCH]
          },
          {
            name: "isAnchor",
            anchor: "respawn-output-is-anchor",
            description: "アンカでリスポーンしたかどうかです。",
            type: ObjectType.BOOLEAN,
            available: [ScenarioType.WATCH]
          }
        ]}
        executable watchable
/>


#### `location` {#respawn-location}

リスポーンする場所を指定します。  

:::tip

アクション実行シナリオで使用した場合は、リスポーンの実行前にベッドスポーン位置を変更します。

:::

#### 出力： `isAnchor` {#respawn-output-is-anchor}

:::danger

`PlayerPostRespawnEvent` では常に `false` になります。

:::

## スニーク {#sneak}

<Action name="プレイヤのスニーク"
        description="プレイヤのスニークに関するアクションです。"
        id="player_sneak"
        events={[
          {
            name: "PlayerToggleSneakEvent",
            package: "org.bukkit.event.player",
          }
        ]}
        args={[
          {
            name: "target",
            anchor: "target",
            description: "スニークするプレイヤです。",
            type: "PlayerSpecifier",
            type_anchor: "#general-target",
            required: [ScenarioType.EXECUTE, ScenarioType.REQUIRE]
          },
          {
            name: "sneaking",
            description: "スニークするかどうかです。",
            type: ObjectType.BOOLEAN
          }
        ]}
        outputs={[
          {
            name: "target",
            type: "Player",
            type_link: "/docs/use/scenario/types/entities#player",
            description: "スニークしたプレイヤです。",
          }
        ]}
        executable
        requireable={"プレイヤがスニークしているかどうか判定します。"}
        watchable
/>

## 走り {#sprint}

<Action name="プレイヤの走り"
        description="プレイヤの走りに関するアクションです。"
        id="player_sprint"
        events={[
          {
            name: "PlayerToggleSprintEvent",
            package: "org.bukkit.event.player",
          }
        ]}
        args={[
          {
            name: "target",
            anchor: "target",
            description: "走らせるプレイヤです。",
            type: "PlayerSpecifier",
            type_anchor: "#general-target",
            required: [ScenarioType.EXECUTE, ScenarioType.REQUIRE]
          },
          {
            name: "sprinting",
            description: "走っているかどうかです。",
            type: ObjectType.BOOLEAN
          }
        ]}
        outputs={[
          {
            name: "target",
            type: "Player",
            type_link: "/docs/use/scenario/types/entities#player",
            description: "走ったプレイヤです。",
          }
        ]}
        executable 
        requireable={"プレイヤが走っているかどうか判定します。"}
        watchable
/>

## テレポート {#teleport}

<Action name="プレイヤのテレポート"
        description="プレイヤのテレポートに関するアクションです。"
        id="player_teleport"
        events={
          {
            name: "PlayerTeleportEvent",
            package: "org.bukkit.event.player",
          }
        }
        args={[
          {
            name: "target",
            anchor: "target",
            description: "テレポートするプレイヤです。",
            type: "PlayerSpecifier",
            type_anchor: "#general-target",
            required: [ScenarioType.EXECUTE]
          },
          {
            name: "from",
            description: "テレポート前の座標です。",
            type: "Location",
            type_link: "/docs/use/scenario/types/misc#location",
            available: [ScenarioType.WATCH]
          },
          {
            name: "to",
            description: "テレポート後の座標です。",
            type: "Location",
            type_link: "/docs/use/scenario/types/misc#location",
            required: [ScenarioType.EXECUTE]
          },
          {
            name: "cause",
            description: "テレポートの原因です。",
            type: "列挙型{COMMAND, PLUGIN, NETHER_PORTAL, END_PORTAL, END_GATEWAY, CHORUS_FRUIT, SPECTATE, ENDER_PEARL, UNKNOWN}",
            default: "アクション実行シナリオの場合は PLUGIN, 他は N/A"
          }
        ]}
        outputs={[
          {
            name: "target",
            type: "Player",
            type_link: "/docs/use/scenario/types/entities#player",
            description: "テレポートしたプレイヤです。",
          },
          {
            name: "from",
            description: "テレポート前の座標です。",
            type: "Location",
            type_link: "/docs/use/scenario/types/misc#location",
          },
          {
            name: "to",
            description: "テレポート後の座標です。",
            type: "Location",
            type_link: "/docs/use/scenario/types/misc#location",
          },
          {
            name: "cause",
            description: "テレポートの原因です。",
            type: "列挙型{COMMAND, PLUGIN, NETHER_PORTAL, END_PORTAL, END_GATEWAY, CHORUS_FRUIT, SPECTATE, ENDER_PEARL, UNKNOWN}",
          }
        ]}
        executable
        watchable
/>
