import BelowDocument from "/src/components/BelowDocument";

# シナリオ

シナリオの概念とその概要について説明しています。

---

## 概要

シナリオおよびその実行は、 Scenamatica のメイン機能です。
シナリオは、プラグインの開発者が定義した入出力を順番どおりに実行/検証するものです。

以下のような流れでテストを実行します。
1. プラグインの開発者がプラグインの入出力（e.g. プレイヤがキルされる, メッセージが送信される, コマンドを実行する...)を順番どおりに定義します。
2. Scenamatica が順番通りに実行/検証し、プラグインの振る舞いを検証します。

### 「シナリオ」という呼称について {#double-scenario-meaning}

Scenamatica で使用される「シナリオ」という語は、以下の２つの意味で使用されます。

1. [コンテキスト](#context) や [トリガー](#trigger) などの概念を含む、包括的な意味でのシナリオ。
2. [シナリオファイル](#scenario-file) に記述された、プラグインの振る舞いを検証するための一連のアクションのこと。

これらの使い分けは文脈によって異なりますので、適宜読み替えてください。

:::tip

この呼称は以前から変更が議論されています。

:::


## シナリオの記述作業を開発フローに取り込む {#integrating-scenamatica}

シナリオ機能を利用するには, 開発時に [シナリオファイル](#scenario-file) を作成する作業が必要です。
そのため、プラグインの開発フローにシナリオの記述作業を取り込む必要があります。

以下に考えられるシュチュエーションと、開発フローの例を示します。

### 新規機能を作成するとき

1. プラグインの新規機能を開発する。
2. Scenamatica [シナリオファイル](#scenario-file) を記述する。
3. Scenamatica が導入されているサーバにデプロイする。
4. ステップ 2 で記述したシナリオのみを実行する。
5. テストが成功することを確認し、コミットする。

### 既存機能を修正するとき

1. プラグインの既存機能を修正する。
2. Scenamatica が導入されているサーバにデプロイする。
3. 既存のシナリオを実行する。
4. テストが成功することを確認し、コミットする。

### 機能のリリース前

1. Scenamatica が導入されているサーバにデプロイする。
2. 全てのシナリオ実行する。
3. テストが成功することを確認し、バージョンを変更、コミットする。
4. プッシュしリリースする。

## シナリオの具体的な内容及び構造 {#scenario-elements}

<BelowDocument docId="use/scenario/elements"
               label="シナリオの具体的な内容及び構造"
/>



## シナリオファイルについて {#scenario-file}

Scenamatica のシナリオは シナリオファイルと呼ばれる YAML ファイルで記述します。

<BelowDocument docId="use/scenario/file-syntax"
               label="シナリオファイル"
               message="シナリオファイルの構文については、以下のページを参照してください。" />

## Scenamaticaの実行フロー {#scenario-flow}

![Flow#550x](images/scenamatica-flow.svg)

### シナリオの実行フロー

![Scenario#550x](images/scenario.svg)
